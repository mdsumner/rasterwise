system("tar cvzf weird.tar.gz extdata")
library(piggyback)
library(piggyback)
pb_upload("weird.tar.gz")
pb_upload("weird.tar.gz")
pb_upload("weird.tar.gz", tag = "v0.0.1")
guess_repo()
piggyback:::guess_repo()
pb_upload("weird.tar.gz", repo = "https://github.com/mdsumner/weird.nc", tag = "v0.0.1")
pb_upload("weird.tar.gz", repo = "mdsumner/weird.nc", tag = "v0.0.1")
setwd("..")
pb_download("weird.tar.gz", repo = "mdsumner/weird.nc")
setwd("weird.nc")
pb_download("weird.tar.gz", repo = "mdsumner/weird.nc")
pb_download("weird.tar.gz", repo = "mdsumner/weird.nc", dest dest = "~")
pb_download("weird.tar.gz", repo = "mdsumner/weird.nc", dest dest = tempdir())
pb_download("weird.tar.gz", repo = "mdsumner/weird.nc", dest = "~")
stars::read_stars
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
library(piggyback)
pb_upload("weird.tar.gz", tag = "v0.0.2")
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
files <- list.files("weird", recursive = TRUE)
files
files <- list.files("extdata", recursive = TRUE)
files
writeLines(files, "weirdlist.txt")
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
files <- list.files("extdata", recursive = TRUE)
writeLines(files, "weirdlist.txt")
library(piggyback)
pb_upload("weird.tar.gz", tag = "v0.0.2")
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
files <- list.files("extdata", recursive = TRUE)
writeLines(files, "weirdlist.txt")
library(piggyback)
pb_upload("weird.tar.gz", tag = "v0.0.3")
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
files <- list.files("extdata", recursive = TRUE)
writeLines(files, "weirdlist.txt")
library(piggyback)
pb_upload("weird.tar.gz", tag = "v0.0.3")
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
files <- list.files("extdata", recursive = TRUE)
writeLines(files, "weirdlist.txt")
library(piggyback)
pb_upload("weird.tar.gz", tag = "v0.0.4")
usethis::use_readme_rmd()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
writeLines(readLines("weirdlist.txt"))
files <- list.files("extdata", recursive = TRUE, pattern = "nc$") ## not always an extension
writeLines(files, "weirdlist.txt")
writeLines(readLines("weirdlist.txt"))
dump <- system(sprintf("ncdump -h %s", files[i]), intern = TRUE)
for (i in seq_along(files)) {
print("###############################################################################")
print(files[i])
print("\n\n\n\n")
dump <- system(sprintf("ncdump -h %s", files[i]), intern = TRUE)
writeLines(dump)
print("\n\n\n\n")
}
for (i in seq_along(files)) {
print("###############################################################################")
print(files[i])
print("\n\n\n\n")
dump <- system(sprintf("ncdump -h %s", file.path("extdata", files[i])), intern = TRUE)
writeLines(dump)
print("\n\n\n\n")
}
files <- raadtools::amps_d2files()
prj <- "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=180 +x_0=0 +y_0=0 +a=6367470 +b=6367470 +units=m +no_defs"
files <- raadtools::amps_d2files()
prj <- "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=180 +x_0=0 +y_0=0 +a=6367470 +b=6367470 +units=m +no_defs"
library(raster)
# Polar Stereographic projection; projection centered at S. Pole
# Orientation Longitude: 180.0° E
# True Latitude: 71.0° S
#
# WRF mass grid (OLD):
#   dimensions: 666 x 627
# lower left lat/lon (i.e., center of lower left mass grid cell): -50.80146 N, 49.79108 E
# upper right lat/lon (i.e., center of upper right mass grid cell): -48.20068 N, -136.12355 E
# WRF mass grid (NEW):
#   dimensions: 834 x 786
# lower left lat/lon (i.e., center of lower left mass grid cell): -50.6858902 N, 49.7758789 E
# upper right lat/lon (i.e., center of upper right mass grid cell): -48.1201019 N, -136.172516 E
#
prj <- "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=180 +x_0=0 +y_0=0 +a=6367470 +b=6367470 +units=m +no_defs"
ll_ur_new <- rgdal::project(cbind(c(49.7758789, -136.172516),
c(-50.6858902, -48.1201019)),
prj)
ll_ur_old <- rgdal::project(cbind(c(49.79108, -136.12355),
c(-50.80146, -48.20068)),
prj)
ext_new <- extent(ll_ur_new[, 1], ll_ur_new[,2])
ext_old <- extent(ll_ur_old[, 1], ll_ur_old[,2])
wrf_new <- raster(ext_new, nrows = 786, ncols = 834, crs = prj)
wrf_old <- raster(ext_old, nrows = 627, ncols = 666, crs = prj)
read_grid <- function(x) {
x <- brick(x)
if (nrow(x) == 786) {
x <- setExtent(x, ext_new)
} else {
x <- setExtent(x, ext_old)
}
projection(x) <- prj
x
}
read_grid(files$fullname[1])
read_grid(files$fullname[5397])
unlink("weird.tar.gz")
system("tar cvzf weird.tar.gz extdata")
files <- list.files("extdata", recursive = TRUE, pattern = "nc$") ## not always an extension
writeLines(files, "weirdlist.txt")
library(piggyback)
pb_upload("weird.tar.gz", tag = "v0.0.6")
library(raster)
r <- raster("extdata/swapped/3A-DAY.nc")
r
plot(r)
plot(t(r))
plot(log(t(r)))
maps::map(add = T)
r <- raster("extdata/swapped/3A-DAY.nc", level = 2)
plot(log(t(r)))
maps::map(add = T)
r
range(values(r))
plot(r)
plot(t(r))
library(stars)
read_ncdf("extdata/swapped/3A-DAY.nc")
